<div class="container-fluid">
    <!--<script type="text/javascript">
        function getCSV()
        {
            var xmlhttp;
            if (window.XMLHttpRequest)
              {
              xmlhttp=new XMLHttpRequest();
              }
            else
              {
              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
              }
            xmlhttp.onreadystatechange=function()
              {
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                document.getElementById("getCSV").innerHTML=xmlhttp.responseText;
                }else{document.getElementById("getCSV").innerHTML="cargando...";}
              }
            xmlhttp.open("GET","",true);
            xmlhttp.send();
        }
    </script>-->
    <!-- Page Heading -->
    <div id="row_heading" class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Proyecto: {{proyecto.titol}}</h1>
        </div>
    </div>
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-12">
            <div id="cont_alertas" class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Descripción</h3>
                    </div>
                    <div class="panel-body">
                        <h4 class="panel-title"><strong>Inicio del proyecto:</strong> {{proyecto.data.date}}</h4>
                        <br></br>
                        <p>{{proyecto.descripcion}}</p>

                        <script src="https://code.highcharts.com/highcharts.js"></script>
                        <script src="https://code.highcharts.com/modules/exporting.js"></script>
                        <script async src="//jsfiddle.net/dzyxgdvy/embed/"></script>

                        <script type="text/javascript">
                        $.ajax({
                            url: 'metricas/projecto/{{proyecto.id}}',
                            success: function(data) {
                                var chart = new Highcharts.Chart({
                                chart: {
                                    plotBackgroundColor: null,
                                    plotBorderWidth: null,
                                    plotShadow: false,
                                    renderTo: 'container'
                                },
                                title: {
                                    text: 'Reservas de vuelos',
                                    x: -20 //center
                                },
                                xAxis: {
                                    categories: ['En', 'Feb', 'Mar', 'Abr', 'May', 'Jun',
                                        'Jul', 'Ag', 'Set', 'Oct', 'Nov', 'Dec']
                                },
                                yAxis: {
                                    title: {
                                        text: 'Nº de reservas'
                                    },
                                    plotLines: [{
                                        value: 0,
                                        width: 1,
                                        color: '#808080'
                                    }]
                                },
                                legend: {
                                    layout: 'vertical',
                                    align: 'right',
                                    verticalAlign: 'middle',
                                    borderWidth: 0
                                },
                                });
                                var dades = data.split("#");
                                for(var i = 0; i < dades.length - 1; i++){
                                    chart.addSeries({
                                        name: 'ADBE',
                                        data: JON.parse("[" + dades[i] + "]")
                                    }, false);
                                }
                                chart.yAxis[0].isDirty = true;
                                chart.redraw();
                            }
                        });
                        </script>
                        <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>

                        <script type="text/javascript">
                        	var chart;
                        	$(document).ready(function () {
	                            chart = new Highcharts.Chart({
	                                chart: {
	                                    plotBackgroundColor: null,
	                                    plotBorderWidth: null,
	                                    plotShadow: false,
	                                    type: 'area',
	                                    renderTo: 'desempenio'
	                                },
							        title: {
							            text: 'Posición global'
							        },
							        yAxis: {
	                                    title: {
	                                        text: 'Diferencia respecto al año anterior'
	                                    }
                                	},
							        xAxis: {
							            categories: ['En', 'Feb', 'Mar', 'Abr', 'May', 'Jun',
							                                            'Jul', 'Ag', 'Set', 'Oct', 'Nov', 'Dec']
							        },
							        credits: {
							            enabled: false
							        },
							        series: [{
							            name: 'Respecto al año anterior',
							            data: [2, 3, 2, 4, 5, 6, 4, 4, 2, 1, -1, 2]
							        }]
						    	});
							});
                        </script>
						<div id="desempenio" style="min-width: 310px; height: 400px; margin: 0 auto"></div>

                    </div>

                </div>
        </div>
    </div>
    <!-- /.row -->

</div>
<!-- /.container-fluid -->
